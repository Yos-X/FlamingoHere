# Flamingo 支持的歌词格式

修订于 `2025 年 8 月 1 日`。

## TTML

> TTML（Timed Text Markup Language），是一种基于 XML 的时序文本标记语言。它旨在用于全球范围内的跨字幕和字幕传递应用程序，从而简化互操作性并保持与其他字幕文件格式的一致性和兼容性。
其文件扩展名为 .ttml。

### 解析支持

- 支持按行划分歌词、按节拍划分歌词。
- 支持 `ttm:agent` 标记。
- 支持 `ttm:role` 标记，具体支持 `x-bg` 和 `x-translation`，分别为和声和翻译。
- 特别地，也支持在 TTML 文件头部通过 `<translations>` 标签标注翻译。

### 特效支持（相对于 Apple Music）

- [x] 逐字抬升
- [x] 二重唱
- [x] 多行同唱
- [x] 和声（支持在主句的上 / 下显示）
- [x] 辉光

## LRC

> LRC（LyRiCs的缩写）是一种电脑文件格式，可让音频档案（如 MP3、Vorbis 或 MIDI）同步。LRC格式是一种文字格式，与电视和电影的字幕档很相似。
其文件扩展名为 .lrc。

LRC 发展到今天，缺乏组织指定标准规范，导致出现了各种变体，Flamingo 仅支持下面列出的常见几种。

### 解析支持

#### 逐行

```
[时间]歌词
[时间]翻译
[时间]另一种翻译
```

支持通过同时间轴标注翻译，支持多翻译。

```
[时间]歌词1
[时间]
[时间]歌词2
```

支持通过空内容的时间标签标注开唱倒计时。

```
[时间]v1: 歌词
```

支持通过 `v1: ` 等标注歌手。

```
[时间]歌手：
[时间]歌词
```

支持通过 `歌手：` 和 `歌手: ` 标注歌手。

```
[时间]歌词
[bg: [时间]和声歌词 ]
注意：不支持这种格式以外的和声，
     如 [bg: 和声歌词 ] 等。
```

支持通过 `[bg: ]` 标注和声，和声支持翻译。

#### 逐字

```
[时间1]歌词1[时间2]歌词2[时间3]歌词3[时间4]歌词4[时间5]
[时间1]歌词1<时间2>歌词2<时间3>歌词3<时间4>歌词4<时间5>
```

支持通过多个 `[]` 或 `<>` 标注逐字。

```
[时间1]v1: <时间1>歌词1<时间2>歌词2<时间3>
```

支持通过 `v1: ` 等标注歌手。

```
[时间1]歌词1[时间2]歌词2[时间3]
[时间1]翻译[时间]
          （↑ 此处时间无限制，最终翻译会跟随主句）
```

支持通过同时间轴标注翻译（翻译不支持逐字）

```
[时间1]歌词1[时间2]歌词2[时间3]
[bg: [时间1]和声歌词1[时间2]和声歌词2[时间3] ]
```

支持通过 `[bg: ]` 标注和声（和声支持逐字，支持翻译）

对于逐字歌词，Flamingo 会自动判断并加入开唱倒计时。

#### 时间标签

Flamingo 支持下列几种时间标签：

```
[mm:ss]
[mm:ss.ff]
[mm:ss.fff]
[mm:ss:ff]
[mm:ss:fff]
```

注：其中 `mm`、`ss` 仅表意，实际支持任意的时间标签长度。

## 其它事项

#### 歌词规整

为了歌词显示时的整洁美观，Flamingo 的 `YosLyricView` 自带歌词规整功能，会对歌词文本进行包括但不限于 **合并空格、全角 / 半角符号转换、添加 CJK 字符与其它语言之间的间距** 等一系列操作。会导致歌词实际观感可能与文件不大一致，请多注意。  
